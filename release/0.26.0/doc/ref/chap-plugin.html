<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plugins and Hooks (Oils Reference)</title>
    <link rel="stylesheet" type="text/css" href="../../web/base.css" />
<link rel="stylesheet" type="text/css" href="../../web/manual.css" />
<link rel="stylesheet" type="text/css" href="../../web/toc.css" />
<link rel="stylesheet" type="text/css" href="../../web/language.css" />
<link rel="stylesheet" type="text/css" href="../../web/code.css" />

  </head>
  <body class="width40">
    <p id="home-link">
      <span id="why-sponsor"><a href="/why-sponsor.html">Why Sponsor Oils?</a></span> |
      <a href="https://github.com/oilshell/oil/blob/master/doc/ref/chap-plugin.md" id="source-link">source</a> |
      <span id="all-docs"><a href="..">all docs</a>
        for <span id="version-in-header">version 0.26.0</span></span> |
      <a href="/releases.html">all versions</a> |
      <a href="/">oils.pub</a>
      <span id="draft-warning" style="visibility: hidden;"></span>

      <script type="text/javascript">
      function showWarning(el) {
        el.innerHTML = '<br/>This is a DRAFT.  Latest docs are at <a href="/release/latest/doc/">/release/latest/doc/</a> ';
        el.style.visibility = "visible";
      }
      function removeVersion(el) {
        el.innerHTML = '<a href=".">drafts</a>';
      }

      var url = window.location.href;
      if (url.indexOf('/preview/') === -1) {
        console.log("Not a draft");
      } else {
        showWarning(document.querySelector('#draft-warning'));
        removeVersion(document.querySelector('#all-docs'));
      }
      </script>
</p><div class="doc-ref-header">
<p><a href="index.html">Oils Reference</a> â€”
Chapter <strong>Plugins and Hooks</strong></p>
</div>
<p>This chapter describes extension points for OSH and YSH.</p>
<p><span class="in-progress">(in progress)</span></p>
<div id="dense-toc">
<div id="dense-toc-title">In This Chapter</div>
<div id="dense-toc-cols">
<div class="dense-toc-group">
  <a href="#Signals">Signals</a> <br/>
  <a class="dense-toc-h3" href="#SIGTERM">SIGTERM</a> <br/>
  <a class="dense-toc-h3" href="#SIGINT">SIGINT</a> <br/>
  <a class="dense-toc-h3" href="#SIGQUIT">SIGQUIT</a> <br/>
  <a class="dense-toc-h3" href="#SIGTTIN">SIGTTIN</a> <br/>
  <a class="dense-toc-h3" href="#SIGTTOU">SIGTTOU</a> <br/>
  <a class="dense-toc-h3" href="#SIGWINCH">SIGWINCH</a> <br/>
</div>
<div class="dense-toc-group">
  <a href="#Traps">Traps</a> <br/>
  <a class="dense-toc-h3" href="#DEBUG">DEBUG</a> <br/>
  <a class="dense-toc-h3" href="#ERR">ERR</a> <br/>
  <a class="dense-toc-h3" href="#EXIT">EXIT</a> <br/>
  <a class="dense-toc-h3" href="#RETURN">RETURN</a> <br/>
</div>
<div class="dense-toc-group">
  <a href="#Words">Words</a> <br/>
  <a class="dense-toc-h3" href="#PS1">PS1</a> <br/>
  <a class="dense-toc-h3" href="#PS2">PS2</a> <br/>
  <a class="dense-toc-h3" href="#PS3">PS3</a> <br/>
  <a class="dense-toc-h3" href="#PS4">PS4</a> <br/>
</div>
<div class="dense-toc-group">
  <a href="#Completion">Completion</a> <br/>
  <a class="dense-toc-h3" href="#complete">complete</a> <br/>
</div>
<div class="dense-toc-group">
  <a href="#Other-Plugin">Other Plugin</a> <br/>
  <a class="dense-toc-h3" href="#PROMPT_COMMAND">PROMPT_COMMAND</a> <br/>
</div>
<div class="dense-toc-group">
  <a href="#YSH">YSH</a> <br/>
  <a class="dense-toc-h3" href="#renderPrompt">renderPrompt()</a> <br/>
</div>
</div>
</div>
<a name="Signals"></a>
<h2>Signals</h2>
<a name="SIGTERM"></a>
<h3>SIGTERM</h3>
<p>SIGTERM is the default signal sent by <code>kill</code>.  It asks a process to terminate.</p>
<p>You can register a SIGTERM handler with the <a href="chap-builtin-cmd.html#trap">trap</a> builtin.</p>
<a name="SIGINT"></a>
<h3>SIGINT</h3>
<p>SIGINT is usually generated by Ctrl-C.  It interrupts what the shell is doing
and returns to the prompt.</p>
<p>You can register a SIGINT handler with the <a href="chap-builtin-cmd.html#trap">trap</a> builtin.</p>
<a name="SIGQUIT"></a>
<h3>SIGQUIT</h3>
<p>SIGQUIT is usually generated by Ctrl-.</p>
<a name="SIGTTIN"></a>
<h3>SIGTTIN</h3>
<p>Used by the job control implementation.</p>
<a name="SIGTTOU"></a>
<h3>SIGTTOU</h3>
<p>Used by the job control implementation.</p>
<a name="SIGWINCH"></a>
<h3>SIGWINCH</h3>
<p>Oils receives this signal when the terminal window size changes.</p>
<a name="Traps"></a>
<h2>Traps</h2>
<a name="DEBUG"></a>
<h3>DEBUG</h3>
<p>Runs code before &quot;leaf&quot; commands, like</p>
<pre><code>echo hi
a=b
[[ x -eq y ]]
(( a = 42 ))
</code></pre>
<p>But not before <code>{</code>:</p>
<pre><code>{ echo one; echo two; }
</code></pre>
<hr />
<p>See the <a href="../quirks.html">Quirks doc</a> for an interaction between the <code>DEBUG</code>
trap, pipelines, and interactive shells.</p>
<a name="ERR"></a>
<h3>ERR</h3>
<p>TODO</p>
<a name="EXIT"></a>
<h3>EXIT</h3>
<p>TODO</p>
<a name="RETURN"></a>
<h3>RETURN</h3>
<p>TODO</p>
<a name="Words"></a>
<h2>Words</h2>

<a name="PS1"></a>
<h3>PS1</h3>
<p>First line of the shell prompt.</p>
<a name="PS2"></a>
<h3>PS2</h3>
<p>Second line of the shell prompt (unimplemented).</p>
<a name="PS3"></a>
<h3>PS3</h3>
<p>For the <code>select</code> builtin (unimplemented).</p>
<a name="PS4"></a>
<h3>PS4</h3>
<p>The prefix of each line of output in <code>set -x</code> aka <code>set -o xtrace</code>.  The leading
character is special.</p>
<a name="Completion"></a>
<h2>Completion</h2>
<a name="complete"></a>
<h3>complete</h3>
<p>The <a href="chap-builtin-cmd.html#complete">complete</a> builtin calls back into the shell evaluator to create
candidate strings for autocompletion:</p>
<ul>
<li><code>-C</code> is an external command that's executed</li>
<li><code>-F</code> is the name of a shell function name that's run</li>
<li><code>-W</code> is a word list that's evalutaed</li>
</ul>
<a name="Other-Plugin"></a>
<h2>Other Plugin</h2>
<a name="PROMPT_COMMAND"></a>
<h3>PROMPT_COMMAND</h3>
<p>A command that's executed before each prompt.</p>
<p>This feature is taken from <a href="/cross-ref.html?tag=bash#bash">bash</a>.</p>
<a name="YSH"></a>
<h2>YSH</h2>
<a name="renderPrompt"></a>
<h3>renderPrompt()</h3>
<p>Users may define this func to customize their prompt.</p>
<p>The func should take the global <code>value.IO</code> instance, and return a prompt string
(type <code>value.Str</code>).</p>
<p>To construct the prompt, it can make calls like
<a href="chap-type-method.html?topic=promptVal#promptVal"><code>io-&gt;promptVal('$')</code></a>.</p>
<p>To render the prompt, YSH first checks if this function exists.  Otherwise, it
uses <a href="chap-plugin.html?topic=PS1#PS1"><code>$PS1</code></a> with a <code>ysh</code> prefix.</p>

    <div id="build-timestamp">
      <i>Generated on Sun, 05 Jan 2025 23:28:55 -0500</i>
    </div>
  </body>
</html>
